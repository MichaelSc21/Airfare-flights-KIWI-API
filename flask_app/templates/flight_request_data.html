{% extends "layout.html" %}
{% block content %}



<!DOCTYPE html>
<html>
<head>
  <title>Loading Screen</title>
  <style>
    /* Loading screen container */
    .loading-container {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: #f8f8f8;
      z-index: 9999;
    }

    /* Loading spinner animation */
    .loading-spinner {
      width: 50px;
      height: 50px;
      border: 3px solid #007bff;
      border-radius: 50%;
      border-top-color: transparent;
      animation: loading-animation 1s linear infinite;
    }

    /* Animation keyframes for loading spinner */
    @keyframes loading-animation {
      0% {
        transform: rotate(0deg);
      }
      100% {
        transform: rotate(360deg);
      }
    }

    /* Loading text */
    .loading-text {
      margin-top: 20px;
      font-size: 18px;
      color: #007bff;
    }
  </style>
</head>
<body>
  <div class="loading-container">
    <div class="loading-spinner"></div>
    <div class="loading-text">Loading... This will take a minute</div>
  </div>
  <div class="chart1" ></div>

  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script type="text/javascript">

    $(document).ready(function() {
    var intervalId = setInterval(function() {
        // Send AJAX request to Flask app to check for JSON data
        $.ajax({
            url: '/get_result',  // replace with your Flask route for checking data
            type: 'GET',
            success: function(response) {
                // If JSON data is available, handle it
                if (response.response) {
                    document.querySelector('.loading-container').style.display = 'none';
                    document.querySelector('.chart1').style.display = 'block';
                    clearInterval(intervalId);  // stop polling
                    // Handle the data here, e.g. update UI or perform other actions

                    // Update the result div with the received data
                    //document.getElementById('result').innerHTML = data.result;
                    var graphs1 = JSON.parse(response.data);
                    Plotly.plot("chart1", graphs1,{});
                }
            }
        });
    }, 1000);  // polling interval in milliseconds (e.g. 3000 ms = 3 seconds)
    });


  </script>

</body>
</html>
{% endblock %}